<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <link href="style.css" rel="stylesheet">

  <title>Gladys Marcus Library</title>

  <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/1ddf8635da.js" crossorigin="anonymous"></script>
  <!-- Google Calendar API JS -->
  <script src="https://apis.google.com/js/api.js"></script>
  <script>
    function start() {
      // Initializes the client with the API key and the Translate API.
      gapi.client.init({
        'apiKey': 'AIzaSyDnIFnS4i7ytNhD12Whm5wn5N7G1jV_aow',
        'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest']
      }).then(function() {
        listUpcomingEvents();
      })
    };

    function listUpcomingEvents() {
      var now = new Date();
      var min = new Date(now);
      min.setHours(min.getHours() - 24);
      var max = new Date(now);
      max.setHours(max.getHours() + 24);
      gapi.client.calendar.events.list({
        'calendarId': 'c_4usr04gs60r8f0uap1ef64kir8@group.calendar.google.com',
        'timeMin': min.toISOString(),
        'timeMax': max.toISOString(),
        'showDeleted': false,
        'singleEvents': true,
        'orderBy': 'startTime'
      }).then(function(response) {
        var events = response.result.items;
        if (events.length > 0) {
          var open = false;
          var today_events = [];
          var tomorrow_events = []
          for (i = 0; i < events.length; i++) {
            var event = events[i];
            var starting = new Date(event.start.dateTime);
            var ending = new Date(event.end.dateTime);
            if ((now >= starting) && (now <= ending)) {
              open = true;
            }
            if (now.getFullYear() === starting.getFullYear() && now.getMonth() === starting.getMonth() && now.getDate() === starting.getDate()) {
              today_events.push(event);
            }
            if (now.getFullYear() === starting.getFullYear() && now.getMonth() === starting.getMonth() && (now.getDate() + 1) === starting.getDate()) {
              tomorrow_events.push(event);
            }
          }
          if (open) {
            $('#hours').append('<p class="lead">The Library is currently open <i class="far fa-smile text-warning fs-4"></i></p>');
            $('#hours').append('<p>Today\'s hours:</p>');
            var hours_list = $('<ul class="list-unstyled"></ul>');
            for (var i = 0; i < today_events.length; i++) {
              var todays_start = new Date(today_events[i].start.dateTime);
              var todays_end = new Date(today_events[i].end.dateTime);
              hours_list.append('<li>' + today_events[i].summary + ': ' + todays_start.toLocaleString('en-US', {
                hour: 'numeric',
                minute: 'numeric',
                hour12: true
              }) + ' - ' + todays_end.toLocaleString('en-US', {
                hour: 'numeric',
                minute: 'numeric',
                hour12: true
              }) + '</li>');
            }
            $('#hours').append(hours_list);
          } else {
            $('#hours').append('<p class="lead">The Library is currently closed <i class="far fa-frown text-danger fs-4"></i></p>');
            var early = false;
            for (var i = 0; i < today_events.length; i++) {
              if (now <= new Date(today_events[i].start.dateTime)) {
                early = true;
              }
            }
            if (early) {
              $('#hours').append('<p>Today\'s hours:</p>');
              var hours_list = $('<ul class="list-unstyled"></ul>');
              for (var i = 0; i < today_events.length; i++) {
                var todays_start = new Date(today_events[i].start.dateTime);
                var todays_end = new Date(today_events[i].end.dateTime);
                hours_list.append('<li>' + today_events[i].summary + ': ' + todays_start.toLocaleString('en-US', {
                  hour: 'numeric',
                  minute: 'numeric',
                  hour12: true
                }) + ' - ' + todays_end.toLocaleString('en-US', {
                  hour: 'numeric',
                  minute: 'numeric',
                  hour12: true
                }) + '</li>');
              }
              $('#hours').append(hours_list);
            } else {
              $('#hours').append('<p>Tomorrow\'s hours:</p>');
              var hours_list = $('<ul class="list-unstyled"></ul>');
              for (var i = 0; i < tomorrow_events.length; i++) {
                var tomorrows_start = new Date(tomorrow_events[i].start.dateTime);
                var tomorrows_end = new Date(tomorrow_events[i].end.dateTime);
                hours_list.append('<li>' + tomorrow_events[i].summary + ': ' + tomorrows_start.toLocaleString('en-US', {
                  hour: 'numeric',
                  minute: 'numeric',
                  hour12: true
                }) + ' - ' + tomorrows_end.toLocaleString('en-US', {
                  hour: 'numeric',
                  minute: 'numeric',
                  hour12: true
                }) + '</li>');
                console.log(tomorrow_events[i].summary + ': ' + tomorrows_start.toLocaleString('en-US', {
                  hour: 'numeric',
                  minute: 'numeric',
                  hour12: true
                }) + ' - ' + tomorrows_end.toLocaleString('en-US', {
                  hour: 'numeric',
                  minute: 'numeric',
                  hour12: true
                }));
              }
              $('#hours').append(hours_list);
            }
          }
        } else {
          console.log("Error");
        }
      });
    }

    // Loads the JavaScript client library and invokes `start` afterwards.
    gapi.load('client', start);
  </script>
  <script type="text/javascript">
    function searchPrimo() {
      document.getElementById("primoQuery").value = "any,contains," + document.getElementById("primoQueryTemp").value.replace(/[,]/g, " ");
      document.forms["multisearch"].submit();
    }
  </script>
  <script type="text/javascript">
    function searchJournals() {
      document.getElementById("journalsPrimoQuery").value = "any,contains," + document.getElementById("journalsQueryTemp").value.replace(/[,]/g, " ");
      document.getElementById("journalsQuery").value = "any," + document.getElementById("journalsQueryTemp").value.replace(/[,]/g, " ");
      document.forms["journalssearch"].submit();
    }
  </script>

</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img src="images/button.png" height="30" class="d-inline-block align-top" alt="">
          Gladys Marcus Library
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#">Find, Borrow, Request</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Databases</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" tabindex="-1" aria-disabled="true">Research and Support Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" tabindex="-1" aria-disabled="true">Library Spaces and Technology</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" tabindex="-1" aria-disabled="true">About</a>
            </li>
          </ul>
          <form class="d-flex">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-secondary" type="submit">Search</button>
          </form>
        </div>
      </div>
    </nav>
  </header>
  <main class="container-fluid">
    <div class="landing row justify-content-center">
      <div class="col-md-6 col-xl-5 p-lg-5 my-5 bg-light">
        <h1 class="display-3 fw-normal">Gladys Marcus Library</h1>
        <p class="lead">The FIT Library is your one-stop shop for all your information needs. This tagline is clever and persausive. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna
          aliqua. Morbi blandit cursus risus at ultrices mi tempus imperdiet.</p>
      </div>
    </div>
    <div class="row justify-content-center bg-light">
      <div class="col-md-6 col-xl-5 p-lg-5 my-5">
        <h2 class="mb-4">
          <i class="fa fa-search"></i>
          OneSearch
        </h2>
        <ul class="nav nav-tabs nav-justified mb-3" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="multisearch-tab" data-bs-toggle="tab" data-bs-target="#multisearch" type="button" role="tab" aria-controls="multisearch" aria-selected="true">OneSearch</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="journals-tab" data-bs-toggle="tab" data-bs-target="#journals" type="button" role="tab" aria-controls="journals" aria-selected="true">Journals</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="databases-tab" data-bs-toggle="tab" data-bs-target="#databases" type="button" role="tab" aria-controls="databases" aria-selected="true">Databases</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="libguides-tab" data-bs-toggle="tab" data-bs-target="#libguides" type="button" role="tab" aria-controls="libguides" aria-selected="false">LibGuides</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="site-tab" data-bs-toggle="tab" data-bs-target="#site" type="button" role="tab" aria-controls="site" aria-selected="false">Site Search</button>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="multisearch" role="tabpanel" aria-labelledby="multisearch-tab">
            <form action="https://suny-fit.primo.exlibrisgroup.com/discovery/search" enctype="application/x-www-form-urlencoded; charset=utf-8" method="get" name="multisearch" onsubmit="searchPrimo()">
              <!-- Parameters -->
              <input name="vid" type="hidden" value="01SUNY_FIT:01SUNY_FIT">
              <input name="tab" type="hidden" value="Everything">
              <input name="search_scope" type="hidden" value="MyInst_and_CI">
              <input id="primoQuery" name="query" type="hidden">
              <div class="input-group mb-3">
                <input id="primoQueryTemp" type="search" class="form-control form-control-lg" placeholder="Search for books, e-books, articles, digital media, and more" aria-label="Search for books, e-books, articles, digital media, and more"
                  aria-describedby="search-button1">
                <button class="btn btn-outline-secondary" type="submit" id="search-button1">
                  <i class="fas fa-search" title="Search"></i>
                  <span class="visually-hidden">Search</span>
                </button>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="facet" id="everything" value="" checked>
                <label class="form-check-label" for="inlineRadio1">Everything</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="facet" id="physical" value="tlevel,include,available_p">
                <label class="form-check-label" for="inlineRadio2">Physical</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="facet" id="digital" value="tlevel,include,online_resources">
                <label class="form-check-label" for="inlineRadio3">Digital</label>
              </div>
            </form>
          </div>
          <div class="tab-pane fade" id="journals" role="tabpanel" aria-labelledby="journals-tab">
            <form action="https://onesearch.fitnyc.edu/discovery/jsearch" enctype="application/x-www-form-urlencoded; charset=utf-8" method="get" name="journalssearch" onsubmit="searchJournals()">
              <!-- Parameters -->
              <input name="vid" type="hidden" value="01SUNY_FIT:01SUNY_FIT">
              <input name="tab" type="hidden" value="jsearch_slot">
              <input id="journalsPrimoQuery" name="query" type="hidden">
              <input id="journalsQuery" name="journals" type="hidden">
              <div class="input-group mb-3">
                <input id="journalsQueryTemp" type="search" class="form-control form-control-lg" placeholder="Search for journal titles" aria-label="Search for journal titles" aria-describedby="search-button2">
                <button class="btn btn-outline-secondary" type="submit" id="search-button2">
                  <i class="fas fa-search" title="Search"></i>
                  <span class="visually-hidden">Search</span>
                </button>
              </div>
            </form>
          </div>
          <div class="tab-pane fade" id="databases" role="tabpanel" aria-labelledby="databases-tab">
            <form action="https://fitnyc.libguides.com/az.php" enctype="application/x-www-form-urlencoded; charset=utf-8" method="get">
              <div class="input-group mb-3">
                <input type="search" name="q" class="form-control form-control-lg" placeholder="Search for database titles" aria-label="Search for database titles" aria-describedby="search-button3">
                <button class="btn btn-outline-secondary" type="submit" id="search-button3">
                  <i class="fas fa-search" title="Search"></i>
                  <span class="visually-hidden">Search</span>
                </button>
              </div>
            </form>
          </div>
          <div class="tab-pane fade" id="libguides" role="tabpanel" aria-labelledby="libguides-tab">
            <form action="https://fitnyc.libguides.com/srch.php" enctype="application/x-www-form-urlencoded; charset=utf-8" method="get">
              <div class="input-group mb-3">
                <input type="search" name="q" class="form-control form-control-lg" placeholder="Search for Library Guides" aria-label="Search for Library Guides" aria-describedby="search-button4">
                <button class="btn btn-outline-secondary" type="submit" id="search-button4">
                  <i class="fas fa-search" title="Search"></i>
                  <span class="visually-hidden">Search</span>
                </button>
              </div>
            </form>
          </div>
          <div class="tab-pane fade" id="site" role="tabpanel" aria-labelledby="site-tab">
            <form action="https://ousearch.omniupdate.com/texis/search/" enctype="application/x-www-form-urlencoded; charset=utf-8" method="get">
              <!-- Fixed parameters -->
              <input name="site" id="site" value="default_collection" type="hidden">
              <input name="pr" value="fit-library" type="hidden">
              <div class="input-group mb-3">
                <input type="search" name="query" class="form-control form-control-lg" placeholder="Search the Library website" aria-label="Search the Library website" aria-describedby="search-button5">
                <button class="btn btn-outline-secondary" type="submit" id="search-button5">
                  <i class="fas fa-search" title="Search"></i>
                  <span class="visually-hidden">Search</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="col-md-4 col-xl-3 p-lg-5 my-5" id="hours">
        <h2 class="mb-4">
          <i class="far fa-clock"></i>
          Hours
        </h2>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-md-9 p-lg-5 my-5">
        <h2>
          <i class="fas fa-book-open"></i>
          What's New?
        </h2>
        <iframe src="https://fitnycdigitalinitiatives.github.io/onesearch-newbooks/" width="100%" class="new-books-slider"></iframe>
      </div>
    </div>
    <div class="row justify-content-center bg-light">
      <div class="col-md-6 col-xl-5 p-lg-5 my-5">
        <div class="ratio ratio-16x9">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/FcyC6FFY1eU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
        </div>
      </div>
      <div class="col-md-4 col-xl-3 p-lg-5 my-5">
        <h2 class="mb-4">
          <i class="far fa-calendar-alt"></i>
          Upcoming Events
        </h2>
        <ul>
          <li>Love Your Library Event: 4/29</li>
          <li>FIT Authors Event: 5/7</li>
          <li>Citation Salon: 5/12</li>
        </ul>
      </div>
    </div>
  </main>


</body>

</html>